<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>轮回循环</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "仿宋", "FangSong", serif;
        }
        
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f5f7fa;
            padding: 20px;
            color: #333;
        }
        
        .container {
            width: 100%;
            max-width: 800px;
            text-align: center;
            padding: 30px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .description {
            font-size: 1.1rem;
            margin-bottom: 30px;
            color: #7f8c8d;
            line-height: 1.6;
        }
        
        .game-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 400px;
            padding: 20px;
            border-radius: 10px;
            background-color: #f8f9fa;
            margin-bottom: 30px;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .start-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .start-btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 16px 40px;
            font-size: 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
            font-family: "仿宋", "FangSong", serif;
        }
        
        .start-btn:hover {
            background-color: #2980b9;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }
        
        .result-container {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .success-title {
            font-size: 2rem; /* 二号字体 */
            color: #27ae60;
            margin-bottom: 30px;
            text-align: center;
            line-height: 1.4;
        }
        
        .continue-btn {
            background-color: #27ae60;
            color: white;
            border: none;
            padding: 15px 50px;
            font-size: 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: "仿宋", "FangSong", serif;
            text-align: center;
            width: 220px;
        }
        
        .continue-btn:hover {
            background-color: #219653;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }
        
        .failure-title {
            font-size: 2rem; /* 二号字体 */
            color: #e74c3c;
            margin-bottom: 20px;
            text-align: center;
            line-height: 1.4;
        }
        
        .failure-message {
            font-size: 1.2rem; /* 小三号字体 */
            color: #34495e;
            margin-bottom: 30px;
            text-align: center;
            line-height: 1.6;
            min-height: 80px;
            padding: 15px;
            width: 100%;
            max-width: 600px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #e74c3c;
        }
        
        .retry-btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 15px 50px;
            font-size: 1.3rem; /* 三号字体 */
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: "仿宋", "FangSong", serif;
            text-align: center;
            width: 220px;
        }
        
        .retry-btn:hover {
            background-color: #2980b9;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }
        
        .stats {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            font-size: 1rem;
            color: #7f8c8d;
        }
        
        .stat-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .probability-info {
            background-color: #e8f4fc;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 1rem;
            line-height: 1.5;
        }
        
        .highlight {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .success-highlight {
            color: #27ae60;
            font-weight: bold;
        }
        
        .reset-info {
            margin-top: 20px;
            font-size: 0.9rem;
            color: #7f8c8d;
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .game-area {
                min-height: 350px;
            }
            
            .stats {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>你回到了“过去”</h1>
        
        <div class="probability-info">
            <p>当前成功概率：<span id="current-probability" class="success-highlight">3%</span> | 失败概率：<span id="failure-probability" class="highlight">97%</span></p >
            <p>已连续失败次数：<span id="failure-streak">0</span> 次（达到10次后下次100%成功）</p >
        </div>
        
        <div class="game-area">
            <div class="start-screen" id="startScreen">
                <p style="font-size: 1.2rem; margin-bottom: 20px;">点击下方按钮开始游戏</p >
                <button class="start-btn" id="startBtn">开始挑战</button>
            </div>
            
            <div class="result-container" id="successResult">
                <h2 class="success-title">你成功了，请继续游戏</h2>
                <button class="continue-btn" id="continueBtn">继续游戏</button>
                <div class="reset-info">
                    <p>走吧，这还不是“终局”</p >
                </div>
            </div>
            
            <div class="result-container" id="failureResult">
                <div class="failure-message" id="failureMessage">
                    <!-- 失败文案将在这里显示 -->
                </div>
                <h2 class="failure-title">但是这次轮回你失败了，没能救下他</h2>
                <button class="retry-btn" id="retryBtn">再来一次</button>
                <div class="reset-info">
                </div>
            </div>
        </div>
        
        <div class="stats">
            <div class="stat-box">
                <span class="stat-value" id="successCount">0</span>
                <span>成功次数</span>
            </div>
            <div class="stat-box">
                <span class="stat-value" id="failureCount">0</span>
                <span>失败次数</span>
            </div>
            <div class="stat-box">
                <span class="stat-value" id="totalAttempts">0</span>
                <span>总尝试次数</span>
            </div>
            <div class="stat-box">
                <span class="stat-value" id="successRate">0%</span>
                <span>成功率</span>
            </div>
        </div>
    </div>

    <script>
        // 游戏状态变量
        let successCount = 0;
        let failureCount = 0;
        let totalAttempts = 0;
        let failureStreak = 0;
        let isFirstSuccess = false;
        
        // 游戏元素
        const startScreen = document.getElementById('startScreen');
        const successResult = document.getElementById('successResult');
        const failureResult = document.getElementById('failureResult');
        const startBtn = document.getElementById('startBtn');
        const continueBtn = document.getElementById('continueBtn');
        const retryBtn = document.getElementById('retryBtn');
        
        // 统计元素
        const successCountEl = document.getElementById('successCount');
        const failureCountEl = document.getElementById('failureCount');
        const totalAttemptsEl = document.getElementById('totalAttempts');
        const successRateEl = document.getElementById('successRate');
        const failureStreakEl = document.getElementById('failureStreak');
        const currentProbabilityEl = document.getElementById('current-probability');
        const failureProbabilityEl = document.getElementById('failure-probability');
        const failureMessageEl = document.getElementById('failureMessage');
        
        // 失败文案数组 - 用户可以在这里添加多个文案
        // 请将以下文案替换为您自己的文案，格式相同，可以添加任意数量
        const failureMessages = [
            "（你对游戏有了经验，在你保护和提醒下，他受的伤少了很多，这次他身上没那么多疤痕了。）",
            "（五个人今天喝成了酒蒙子，你不得不给了他们一人一拳让他们不要再高歌影响鳞渊境的持明休息。）",
            "（应星专门给你雕了一个发簪，青年看你因为没有实物，迟迟绾不起来，笑了一声，接过来亲手帮你绾好。）",
            "（不夜侯除了新品，每天从工造司下班，他都要去星槎海中枢为你买一杯。）",
            "（青年泡茶的手艺不错，对你加奶又加糖并理直气壮表示这比纯茶好喝的行径不予置评。）",
            "（你看着他满头大汗地锻造兵器，应星凝视了你一会，偏头蹭了一下你手心的毛巾擦汗。）",
            "（你用在地摊上买的小簪花别了他满头，那天景元头顶了一个被打出来的大包笑的很开心。）",
            "（仙舟难得下雪，应星见你在走廊看雪，即使你不会冷到，但他还是扯了件披风将你拢在他怀里。）",
            "（你今天在午夜忽然上线，发现他居然还没睡，应星被你耳提面命地骂了一顿，承诺下次一定早睡。）",
            "（他给你做了一个会漂浮游动的金鱼机巧，但是内置的智能语音模块出了问题，金鱼围在你身边唱了一天“你爱我，我爱你.......”）"
        ];
        
        // 初始化游戏
        function initGame() {
            updateStats();
            startScreen.style.display = 'flex';
            successResult.style.display = 'none';
            failureResult.style.display = 'none';
        }
        
        // 更新统计信息
        function updateStats() {
            successCountEl.textContent = successCount;
            failureCountEl.textContent = failureCount;
            totalAttemptsEl.textContent = totalAttempts;
            
            // 计算成功率
            const successRate = totalAttempts > 0 ? Math.round((successCount / totalAttempts) * 100) : 0;
            successRateEl.textContent = `${successRate}%`;
            
            // 更新连续失败次数
            failureStreakEl.textContent = failureStreak;
            
            // 更新当前概率显示
            const successProbability = failureStreak >= 10 ? 100 : 3;
            const failureProbability = failureStreak >= 10 ? 0 : 97;
            
            currentProbabilityEl.textContent = `${successProbability}%`;
            failureProbabilityEl.textContent = `${failureProbability}%`;
            
            // 根据连续失败次数调整概率显示颜色
            if (failureStreak >= 10) {
                currentProbabilityEl.className = 'success-highlight';
                failureProbabilityEl.className = '';
            } else {
                currentProbabilityEl.className = 'success-highlight';
                failureProbabilityEl.className = 'highlight';
            }
        }
        
        // 开始游戏
        function startGame() {
            totalAttempts++;
            
            // 检查是否已经连续失败10次
            let successProbability;
            if (failureStreak >= 10) {
                // 第11次必定成功
                successProbability = 100;
            } else {
                successProbability = 3;
            }
            
            // 生成随机数决定结果
            const randomNum = Math.random() * 100;
            const isSuccess = randomNum < successProbability;
            
            // 处理结果
            if (isSuccess) {
                showSuccessResult();
                successCount++;
                failureStreak = 0; // 重置连续失败计数
                isFirstSuccess = true;
            } else {
                showFailureResult();
                failureCount++;
                failureStreak++;
            }
            
            updateStats();
        }
        
        // 显示成功结果
        function showSuccessResult() {
            startScreen.style.display = 'none';
            failureResult.style.display = 'none';
            successResult.style.display = 'flex';
        }
        
        // 显示失败结果
        function showFailureResult() {
            // 随机选择一个失败文案
            const randomIndex = Math.floor(Math.random() * failureMessages.length);
            failureMessageEl.textContent = failureMessages[randomIndex];
            
            startScreen.style.display = 'none';
            successResult.style.display = 'none';
            failureResult.style.display = 'flex';
        }
        
        // 重置游戏
        function resetGame() {
            startScreen.style.display = 'flex';
            successResult.style.display = 'none';
            failureResult.style.display = 'none';
        }
        
        // 事件监听
        startBtn.addEventListener('click', startGame);
        retryBtn.addEventListener('click', resetGame);
        
        continueBtn.addEventListener('click', function() {
            // 跳转到特定网址
            // 请将以下网址替换为您想要的网址
            window.location.href = "https://www.lofter.com/";
        });
        
        // 初始化游戏
        initGame();
    </script>
</body>
</html>
```